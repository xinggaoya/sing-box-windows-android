# Sing Box Windows - Android VPN 客户端

## v1.2.0 (2025-12-24)

### 主要更新

#### 应用自动更新功能
- **完整的应用内更新系统**：支持检查更新、下载和安装新版本
- **GitHub Release 集成**：自动从 GitHub Releases 获取最新版本信息
- **智能架构匹配**：根据设备 CPU 架构自动选择对应的 APK 文件
- **断点续传支持**：下载支持进度显示和断点续传
- **Wi-Fi 下载限制**：可设置仅在 Wi-Fi 环境下下载更新
- **安装权限管理**：自动检测并引导用户开启安装权限

#### 设置页面重构
- **代码简化**：移除冗余的状态变量，统一使用 `AppSettings` 数据类
- **新增更新卡片**：在设置页面集成应用更新功能入口
- **UI 优化**：使用 `UpdateSection` 组件展示版本信息和更新状态

### 技术改进

#### 更新模块架构 (`update/`)
- **UpdateManager**: 统一更新流程管理器（检查、下载、安装）
- **GitHubReleaseChecker**: GitHub API 版本检查器，支持加速代理
- **ApkDownloader**: APK 文件下载器，支持进度回调
- **AppUpdateInstaller**: APK 安装器，适配不同 Android 版本
- **UpdateStore**: 更新状态管理，使用 StateFlow 响应式更新
- **UpdateSection.kt**: 更新 UI 组件，包含版本显示、更新对话框等

#### 依赖配置
- 新增 `kotlinx-serialization-json` 用于 JSON 解析
- 配置 `kotlin-parcelize` 插件支持 Parcelable
- 添加 `REQUEST_INSTALL_PACKAGES` 权限用于 APK 安装
- 配置 FileProvider 用于安全分享 APK 文件

#### 其他改进
- 优化 GitHub Actions 构建流程配置
- 修复签名步骤的 Base64 解码问题

---

## v1.1.0 (2025-12-23)

### 主要更新

#### Clash API 深度集成
- 使用 Clash REST API 替代原有 CommandClient，实现更稳定的核心通信
- 新增实时流量统计功能，动态展示上传/下载速度
- 新增连接诊断页面，支持查看实时连接详情

#### 本地节点支持
- 支持导入本地节点列表文件
- 本地订阅与远程订阅统一管理
- 支持手动编辑和维护自定义节点

#### 界面体验优化
- 重构应用导航架构，采用底部导航栏设计
- 完善设计系统组件，统一 Material 3 风格
- 优化配色方案和排版，提升视觉效果

#### 设置功能增强
- 新增设置持久化功能，配置自动保存
- 完善设置页面，支持更多自定义选项

### 技术改进
- 重构核心状态管理机制
- 优化订阅管理数据流
- 改进错误处理和用户反馈

---

## 首次发布 (v1.0.0)

Sing Box Windows 是一个基于 sing-box 核心的 Android VPN 客户端应用，提供现代化的网络代理管理功能。

### 核心功能

- 高性能 VPN 服务：基于 sing-box 核心，支持多种代理协议
- 现代化界面：采用 Jetpack Compose 构建的 Material 3 设计风格界面
- 订阅管理：支持添加、编辑和管理多个订阅链接
- 节点测速：自动测试节点延迟，帮助选择最优节点
- 流量统计：实时显示网络连接和流量使用情况
- 智能分组：自动组织和管理节点分组

### 技术特性

- **多架构支持**：支持 ARM64 和 ARMv7 架构设备
- **协议支持**：兼容 VLESS、Shadowsocks 等主流代理协议
- **Base64 解码**：自动处理 Base64 编码的订阅内容
- **GZIP 解压**：支持压缩格式的订阅文件
- **通知管理**：完善的前台通知和权限处理
- **状态管理**：稳定的 VPN 连接状态监控

### v1.0.0 功能亮点

1. **VPN 服务优化**
   - 优化 VPN 启动逻辑
   - 增强状态管理和错误处理
   - 改进权限请求流程

2. **用户界面改进**
   - 实现节点测速功能界面
   - 优化颜色主题和排版风格
   - 添加应用图标资源

3. **订阅管理重构**
   - 重构订阅管理与 UI 交互逻辑
   - 支持编辑现有订阅
   - 改进订阅同步错误处理

4. **核心功能增强**
   - 添加核心状态管理
   - 实现流量统计展示
   - 支持 VLESS 和 Shadowsocks 协议

5. **架构优化**
   - 实现 ABI 拆分配置
   - 生成独立 APK 文件
   - 优化构建配置

### 安装说明

本项目支持多种架构的 APK 文件：

- `app-arm64-v8a-release.apk`：适用于 64 位 ARM 架构设备（推荐）
- `app-armeabi-v7a-release.apk`：适用于 32 位 ARM 架构设备

### 使用要求

- Android 5.0 (API Level 29) 或更高版本
- 需要 VPN 权限和网络访问权限

### 开发信息

- 开发语言：Kotlin + Jetpack Compose
- 核心库：libbox (sing-box)
- 构建工具：Gradle with Kotlin DSL
- UI 框架：Material Design 3

### 已知问题

- 部分旧设备可能需要手动授予通知权限
- 首次连接时需要用户授权 VPN 权限

### 贡献指南

请参考项目中的 [AGENTS.md](AGENTS.md) 文件了解项目结构、编码规范和贡献流程。

---

**注意**：本应用仅供学习和研究使用，请遵守当地法律法规。
